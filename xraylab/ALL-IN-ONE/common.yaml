---
# Hands on data pipelines: automated X-Ray images analysis!
# course_id: rhs2021-a0006
# Owners: Guillaume Moutier, gmoutier@redhat.com, Kyle Bader, kbader@redhat.com

# Platform
platform: opentlc

# Cloud Provider
cloud_provider: none

# Config
env_type: ocp-workloads

# --- Infra Workloads (YAML List)
ocp_workloads:
  - ocp4_workload_serverless
  - ocp4_workload_bookbag_setup
  - ocp4_workload_xray_pipeline_lab

# ---------------------------------------------------------
# Serverless Setup
# ---------------------------------------------------------
ocp4_workload_serverless_channel: stable
ocp4_workload_serverless_install_eventing: true
ocp4_workload_serverless_use_catalog_snapshot: false

# ---------------------------------------------------------
# AMQ Streams Operator Setup
# ---------------------------------------------------------
ocp4_workload_amq_streams_channel: stable
ocp4_workload_amq_streams_starting_csv: amqstreams.v1.8.3
ocp4_workload_amq_streams_wait_for_deploy: true
ocp4_workload_amq_streams_use_catalog_snapshot: false

# ---------------------------------------------------------
# XRay Lab components to install
# ---------------------------------------------------------
ocp4_workload_xray_pipeline_lab_install_odh_operator: true
ocp4_workload_xray_pipeline_lab_install_odh: true
ocp4_workload_xray_pipeline_lab_install_kafkasource: true

# ---------------------------------------------------------
# XRay Lab community catalog snapshot
# ---------------------------------------------------------
ocp4_workload_xray_pipeline_lab_use_catalogsource_setup: false

# ---------------------------------------------------------
# XRay Lab Open Data Hub Operator Setup
# ---------------------------------------------------------
ocp4_workload_xray_pipeline_lab_odh_operator_name: opendatahub-operator
ocp4_workload_xray_pipeline_lab_odh_channel: stable
ocp4_workload_xray_pipeline_lab_odh_automatic_install_plan_approval: true

# ---------------------------------------------------------
# XRay Lab Kafkasource Setup
# ---------------------------------------------------------

# ---------------------------------------------------------
# XRay Lab Bookbag image Setup
# ---------------------------------------------------------
ocp4_workload_bookbag_setup_project: "bookbag"
ocp4_workload_bookbag_setup_project_display: "Bookbag XRay Lab"
ocp4_workload_bookbag_setup_git_repo: https://github.com/red-hat-data-services/xraylab-bookbag.git
ocp4_workload_bookbag_setup_git_version: main
ocp4_workload_bookbag_setup_image_name: xraylab-bookbag


# ---------------------------------------------------------
# XRay Lab per user parameters
# ---------------------------------------------------------
ocp4_workload_xray_pipeline_lab_user_count: 10
ocp4_workload_xray_pipeline_lab_user_base: xraylab-


# AgnosticV / Babylon Metadata
__meta__:
  aws_sandboxed: true
  catalog:
    display_name: Hands On Data Pipelines
    # Icon value should can be any product name, no spaces, for which we have
    # a product icon. Default will be generic icon.
    icon: openshift
    # Possible values: Labs, Workshops, Demos (plurals)
    category: Labs
    # Keywords are used to match search items.
    # Strings in name and labels already match keyword searches.
    # Searches are not case-sensitive.
    keywords:
      - lab
      - ocp4
      - openshift
      - openshift container storage
      - amq
    # Labels populate search filters.
    # Spaces need to be represented as underscores.
    # Label keys and values need to adhere to kubernetes standards:
    # https://kubernetes.io/docs/concepts/overview/working-with-objects/labels/#syntax-and-character-set
    #  * must be 63 characters or less
    #  * must begin and end with an alphanumeric character ([a-z0-9A-Z]),
    #  * can only contain dashes (-), underscores (_), dots (.), and alphanumerics between.
    labels:
      OpenShift_Version: "4.8"
      Product: OpenShift
      Provider: GPTE
      Event: Red_Hat_Summit

  secrets:
    # OpenShift Pull Secret
    # ocp4_pull_secret
    # ocp4_token
    - name: ocp4-token
      namespace: gpte

    # LDAP admin password to check user auth
    # bindPassword
    # kerberos_keytab
    # kerberos_user
    # ocp4_workload_authentication_ldap_bind_password
    # ocp4_workload_authentication_secrets
    - name: ipa-admin
      namespace: gpte

    # Satellite Configuration
    - name: satellite-rhel81
      namespace: gpte